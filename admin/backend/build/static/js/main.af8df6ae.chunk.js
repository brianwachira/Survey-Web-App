(this.webpackJsonpportal=this.webpackJsonpportal||[]).push([[0],{128:function(e,t,n){},152:function(e,t,n){},154:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n(43),c=n.n(i),a=n(11),r=n(48),l=n(94),o={hasError:!1,title:"",message:""},d=function(e){return{type:"SET_NOTIFICATION",data:e}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return e=t.data;default:return e}},j=n(2),b=n.n(j),m=n(5),v=n(3),h=n(12),x=n.n(h),O="/api/submissions",p={getAll:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(O,"/all"),e.next=3,x.a.get(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getBy:function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(O,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBySurvey:function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(O,"/survey/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f={submission:{},submissionsBySurvey:[],submissions:[],filteredSubmissions:[]},g=function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.getBySurvey(e);case 2:s=t.sent,n({type:"SET_SUBMISSIONS_BY_ID",data:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_SUBMISSIONS":return Object(v.a)(Object(v.a)({},e),{},{submissions:t.data});case"SET_SUBMISSIONS_BY_ID":return Object(v.a)(Object(v.a)({},e),{},{submissionsBySurvey:t.data});case"FILTER_SUBMISSIONS":return Object(v.a)(Object(v.a)({},e),{},{filteredSubmissions:e.submissionsBySurvey.filter((function(e){return e.submission.firstname.toLowerCase().includes(t.data.toLowerCase())||e.submission.lastname.toLowerCase().includes(t.data.toLowerCase())}))});case"SET_SUBMISSION":return Object(v.a)(Object(v.a)({},e),{},{submission:t.data});default:return e}},y=n(10),w="/api/survey",S={getAll:function(){var e=Object(m.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(w,"/protected/all"),e.next=3,x.a.get(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getBy:function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("".concat(w,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post(w,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q={survey:{},surveys:[],filteredSurveys:[]},I=function(e){return function(){var t=Object(m.a)(b.a.mark((function t(n){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.getBy(e);case 2:s=t.sent,n({type:"SET_SURVEY",data:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_SURVEYS":return Object(v.a)(Object(v.a)({},e),{},{surveys:t.data});case"SET_SURVEY":return Object(v.a)(Object(v.a)({},e),{},{survey:t.data});case"NEW_SURVEY":return Object(v.a)(Object(v.a)({},e),{},{submissions:[].concat(Object(y.a)(e.surveys),[t.data])});default:return e}},B=Object(r.b)({surveys:k,submissions:N,notification:u}),A=Object(r.c)(B,Object(r.a)(l.a)),_=(n(128),n(129),n(20)),F=n(9),T=n(6),E=n(0),C=function(){var e=Object(a.b)(),t=Object(a.c)((function(e){return e}));if(!t.notification.message)return null;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("section",{className:"notification-bar",children:Object(E.jsx)("div",{className:"container",children:Object(E.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(E.jsxs)("p",{className:"mb-0",children:["\u2714 ",t.notification.message]}),Object(E.jsx)("i",{className:"fa fa-times-circle fa-2x","aria-hidden":"true",onClick:function(){return function(){var n=Object(v.a)(Object(v.a)({},t.notification),{},{title:"",message:""});e(d(n))}()}})]})})})})},U=function(e){var t=e.userName;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"d-flex",children:[Object(E.jsx)("div",{className:"flex-grow-1 ms-3 me-2 my-auto",children:Object(E.jsx)("h5",{className:"mb-0",children:Object(E.jsx)("small",{children:t})})}),Object(E.jsx)("div",{className:"flex-shrink-0 me-3",children:Object(E.jsx)("i",{className:"fa fa-user h2 icon-sidebars","aria-hidden":"true"})})]})})},L=(n(152),function(){var e=window.localStorage.getItem("user"),t=JSON.parse(e);return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(E.jsxs)("div",{className:"container-fluid",children:[Object(E.jsx)(F.c,{to:"/survey/add",className:"navbar-brand",children:Object(E.jsxs)("button",{type:"button",className:"btn  btn-outline-dark",children:["Add Survey ",Object(E.jsx)("i",{className:"fa fa-plus","aria-hidden":"true"})]})}),Object(E.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(E.jsx)("span",{className:"navbar-toggler-icon"})}),Object(E.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(E.jsx)("ul",{className:"w-100 navbar-nav justify-content-center nav justify-content-lg-end",children:Object(E.jsx)("li",{className:"nav-item d-none d-lg-block",children:Object(E.jsx)(U,{userName:t.username})})})})]})})})}),Y=(n(154),function(){return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"d-flex flex-sm-column flex-row flex-nowrap bg-light align-items-center sticky-top",children:[Object(E.jsx)(F.c,{to:"/",className:"d-block p-3 link-dark text-decoration-none",title:"","data-bs-toggle":"tooltip","data-bs-placement":"right","data-bs-original-title":"Icon-only",children:Object(E.jsx)("i",{className:"fa fa-bar-chart  fs-1 icon-custom text-center","aria-hidden":"true"})}),Object(E.jsx)("ul",{className:"nav nav-custom nav-pills nav-flush flex-sm-column flex-row flex-nowrap mb-auto mx-auto text-center justify-content-between justify-content-sm-center w-100 px-2 align-items-center",children:Object(E.jsx)("li",{className:"nav-item",children:Object(E.jsxs)(F.c,{to:"/",className:"nav-link py-3 px-2",title:"Clinics","data-bs-toggle":"tooltip","data-bs-placement":"right","data-bs-original-title":"Home",children:[Object(E.jsx)("i",{className:"fa fa-hospital-o h2 icon-sidebars","aria-hidden":"true"}),Object(E.jsx)("br",{}),Object(E.jsx)("small",{children:"ANALYTICS"})]})})}),Object(E.jsxs)("div",{className:"dropdown",children:[Object(E.jsx)(F.c,{to:"#",className:"d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle",id:"dropdownUser3","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(E.jsx)("i",{className:"fa fa-user h2 icon-sidebars","aria-hidden":"true"})}),Object(E.jsx)("ul",{className:"dropdown-menu text-small shadow","aria-labelledby":"dropdownUser3",children:Object(E.jsx)("li",{children:Object(E.jsx)(F.b,{className:"dropdown-item",to:"#",children:Object(E.jsx)("div",{onClick:function(){return window.localStorage.removeItem("user"),void window.location.reload()},children:"Sign out"})})})})]})]})})}),R=function(e){var t=e.children;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("main",{children:Object(E.jsx)("div",{className:"container-fluid",children:Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col-sm-auto px-0 bg-light sticky-top shadow",children:Object(E.jsx)(Y,{})}),Object(E.jsxs)("div",{className:"col ps-0 pt-0 pe-0 py-3 min-vh-100",children:[Object(E.jsx)(L,{}),t]})]})})})})},V=function(e){var t=e.title,n=e.children;return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{className:"card",children:Object(E.jsxs)("div",{className:"card-body",children:[Object(E.jsx)("h6",{className:"card-title",children:t}),n]})})})},J=function(){var e=Object(T.g)().id,t=Object(a.c)((function(e){return null===e||void 0===e?void 0:e.submissions}));return(null===t||void 0===t?void 0:t.submission)?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(R,{children:Object(E.jsxs)("div",{className:"container-fluid px-5",children:[Object(E.jsx)("h2",{className:"py-4",children:"Submissions"}),Object(E.jsx)("div",{className:"col d-flex px-sm-4 px-0 flex-column h-sm-100",children:Object(E.jsx)("main",{className:"row mb-3",children:Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(V,{title:"Response",children:null===t||void 0===t?void 0:t.submissions.map((function(t){var n,s,i,c,a,r,l,o,d,u,j;return Object(E.jsxs)("div",{children:[Object(E.jsxs)("h3",{children:[(null===t||void 0===t||null===(s=t.submission)||void 0===s?void 0:s._id)===e&&"".concat(null===t||void 0===t||null===(i=t.submission)||void 0===i||null===(c=i.survey)||void 0===c?void 0:c.title," submission for"),"  ",(null===t||void 0===t||null===(a=t.submission)||void 0===a?void 0:a._id)===e&&(null===t||void 0===t||null===(r=t.submission)||void 0===r?void 0:r.firstname)," ",(null===t||void 0===t||null===(l=t.submission)||void 0===l?void 0:l._id)===e&&(null===t||void 0===t||null===(o=t.submission)||void 0===o?void 0:o.lastname)]}),(null===(d=t.submission)||void 0===d?void 0:d._id)===e&&(null===t||void 0===t||null===(u=t.response[0])||void 0===u||null===(j=u.response)||void 0===j?void 0:j.map((function(e,t){var n,s,i;return Object(E.jsxs)("div",{children:[Object(E.jsxs)("p",{className:"mb-0",children:[t+1,": ",null===e||void 0===e||null===(n=e.question)||void 0===n?void 0:n.passage]}),null===e||void 0===e||null===(s=e.question)||void 0===s||null===(i=s.options)||void 0===i?void 0:i.map((function(e){return Object(E.jsxs)("p",{className:"mb-0",children:[null===e||void 0===e?void 0:e.choice,": ",null===e||void 0===e?void 0:e.value]},null===e||void 0===e?void 0:e._id)})),Object(E.jsxs)("p",{children:["Selected choice: ",e.choice]})]},e._id)})))]},null===t||void 0===t||null===(n=t.submission)||void 0===n?void 0:n._id)}))})})})})]})})}):Object(E.jsx)("h2",{children:"loading..."})},M=n(8),D=n(101),P=function(e){var t=e.label,n=Object(D.a)(e,["label"]);return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("button",Object(v.a)(Object(v.a)({},n),{},{children:t}))})},z=function(){return Object(E.jsx)("main",{className:"form-container",children:Object(E.jsx)("div",{className:"form-signin",children:Object(E.jsxs)(M.d,{children:[Object(E.jsx)("div",{className:"d-flex justify-content-center",children:Object(E.jsx)("i",{className:"fa fa-bar-chart fa-4x mb-4","aria-hidden":"true"})}),Object(E.jsx)("p",{className:"h5 mb-3 fw-normal text-center",children:"Please sign in"}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{htmlFor:"",className:"form-label",children:"Username"}),Object(E.jsx)(M.b,{id:"username",name:"username",placeholder:"Username",className:"form-control",type:"text"}),Object(E.jsx)(M.a,{name:"username",className:"text-danger"})]}),Object(E.jsxs)("div",{className:"mb-3",children:[Object(E.jsx)("label",{htmlFor:"",className:"form-label",children:"Password"}),Object(E.jsx)(M.b,{id:"password",name:"password",placeholder:"Password",className:"form-control",type:"password"}),Object(E.jsx)(M.a,{name:"password",className:"text-danger"})]}),Object(E.jsx)(P,{label:"Log in",type:"submit",className:"btn btn-dark w-100"})]})})})},W=n(19),Q={login:function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.post("/api/auth",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setAuthToken:function(e){e?x.a.defaults.headers.common.Authorization="Bearer ".concat(e):delete x.a.defaults.headers.common.Authorization}},G=function(){var e=Object(a.b)(),t=W.b().shape({username:W.c().min(2,"Too Short!").required("Username is required"),password:W.c().min(2,"Too Short!").required("Password is required")}),n=function(){var t=Object(m.a)(b.a.mark((function t(n){var s,i,c,a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Q.login({username:n.username,password:n.password});case 3:s=t.sent,window.localStorage.setItem("user",JSON.stringify(s)),e(d(i={hasError:!1,title:"Log In Success!",message:"Log in successful"})),setTimeout((function(){e(d(Object(v.a)(Object(v.a)({},i),{},{title:"",message:""})))}),2e3),setTimeout((function(){window.location.href="".concat(window.location.protocol,"//").concat(window.location.host)}),1e3),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),r={hasError:!0,title:"Log In Failed!",message:"Log In Failed! ".concat(null===t.t0||void 0===t.t0||null===(c=t.t0.response)||void 0===c||null===(a=c.data)||void 0===a?void 0:a.error)},e(d(r)),setTimeout((function(){e(d(Object(v.a)(Object(v.a)({},r),{},{title:"",message:""})))}),2e3);case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(M.e,{initialValues:{username:"",password:""},onSubmit:n,validationSchema:t,children:function(e){var t=e.handleSubmit;return Object(E.jsx)(z,{onSubmit:t})}})})},H=(n(253),function(e){var t=e.title,n=e.items,s=e.fetchItem,i=e.children;return n?Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"d-flex flex-sm-column flex-row flex-grow-1 align-items-center align-items-sm-start px-3 pt-2 text-white vh-100",children:[Object(E.jsx)(F.c,{to:"/analytics",className:"d-flex align-items-start pb-sm-3 mb-md-0 me-md-auto text-dark text-decoration-none",children:Object(E.jsx)("small",{children:t})}),n?Object(E.jsx)("ul",{className:"nav nav-pills flex-sm-column flex-row flex-nowrap flex-shrink-1 flex-sm-grow-0 flex-grow-1 mb-sm-auto mb-0 justify-content-center align-items-center align-items-sm-start",id:"menu",children:null===n||void 0===n?void 0:n.map((function(e){var t,n,c,a;return Object(E.jsx)("li",{className:"nav-item dropdown btn-group mb-3 w-100",children:Object(E.jsx)("div",{className:"btn-custom w-100",children:Object(E.jsx)(F.b,{className:"nav-link",to:"#",children:Object(E.jsxs)("div",{className:"d-flex justify-content-between",children:[i,Object(E.jsxs)("button",{className:"btn-style-none",onClick:function(){var t;return s(null===e||void 0===e||null===(t=e.survey)||void 0===t?void 0:t._id)},children:[Object(E.jsx)("p",{className:"mb-0",children:null===e||void 0===e||null===(n=e.survey)||void 0===n?void 0:n.title}),Object(E.jsx)("p",{children:Object(E.jsxs)("small",{children:["By ",null===e||void 0===e||null===(c=e.survey)||void 0===c||null===(a=c.admin)||void 0===a?void 0:a.username]})})]}),Object(E.jsx)("button",{type:"button",className:"btn-style-none dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(E.jsx)("i",{className:"fa fa-ellipsis-v text-right","aria-hidden":"true"})}),Object(E.jsxs)("ul",{className:"dropdown-menu",children:[Object(E.jsx)("li",{children:Object(E.jsx)(F.b,{className:"dropdown-item disabled",to:"/comingsoon",children:"View More"})}),Object(E.jsx)("li",{children:Object(E.jsx)(F.b,{className:"dropdown-item disabled",to:"/comingsoon",children:"Delete Survey"})})]})]})})})},null===e||void 0===e||null===(t=e.survey)||void 0===t?void 0:t._id)}))}):Object(E.jsx)("span",{children:"loading!!"})]})}):Object(E.jsx)(E.Fragment,{children:"loading!!"})}),K=(n(254),function(e){var t=e.onChange;return Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)("div",{className:"row g-3 d-flex justify-content-center",children:[Object(E.jsxs)("div",{className:"col-auto w-50",children:[Object(E.jsx)("label",{htmlFor:"inputSearch",className:"visually-hidden",children:"John Doe"}),Object(E.jsx)("input",{type:"text",className:"form-control",id:"inputSearch",placeholder:"John Doe",onChange:function(e){return t(e.target.value)}})]}),Object(E.jsx)("div",{className:"col-auto",children:Object(E.jsx)("button",{type:"submit",className:"btn btn-outline-dark mb-3",children:"Search By Name"})})]})})}),X=function(){var e,t,n,i,c,r,l,o,d,u,j,v,h,x,O,p,f,N,y,w,S,q,k,B,A,T,C=Object(a.c)((function(e){return e})),U=Object(a.b)(),L=function(){var e=Object(m.a)(b.a.mark((function e(t){var n,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===C||void 0===C||null===(n=C.surveys)||void 0===n||null===(s=n.survey)||void 0===s?void 0:s._id)===t){e.next=4;break}return U(I(t)),e.next=4,U(g(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=null===C||void 0===C||null===(e=C.surveys)||void 0===e||null===(t=e.survey)||void 0===t||null===(n=t.survey)||void 0===n?void 0:n.title,J=Object(s.useState)(""),M=Object(_.a)(J,2),D=M[0],P=M[1];return Object(s.useEffect)((function(){var e;U((e=D,function(t){t({type:"FILTER_SUBMISSIONS",data:e})}))}),[D]),console.log(C),Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(R,{children:Object(E.jsxs)("div",{className:"container-fluid px-5",children:[Object(E.jsx)("h2",{className:"py-4",children:"Surveys"}),Object(E.jsxs)("div",{className:"row",children:[Object(E.jsx)("div",{className:"col-12 col-sm-3 col-xl-auto px-sm-2 px-0 bg-light d-flex rounded sticky-top overflow-auto",children:Object(E.jsx)(H,{title:"Surveys",items:null===C||void 0===C||null===(i=C.surveys)||void 0===i?void 0:i.surveys,fetchItem:L})}),Object(E.jsxs)("div",{className:"col d-flex px-sm-4 px-0 flex-column h-sm-100",children:[Object(E.jsx)("main",{className:"row mb-3",children:Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(V,{title:Y?"Information about ".concat(Y," survey"):"Information about surveys",children:(null===C||void 0===C||null===(c=C.surveys)||void 0===c||null===(r=c.survey)||void 0===r||null===(l=r.survey)||void 0===l?void 0:l.title)?Object(E.jsx)("div",{className:"row",children:Object(E.jsxs)("div",{className:"col",children:[Object(E.jsxs)("h6",{children:[Object(E.jsx)("span",{className:"badge rounded-pill bg-success fs-6",children:null===C||void 0===C||null===(o=C.submissions)||void 0===o||null===(d=o.submissionsBySurvey)||void 0===d?void 0:d.length})," Responses"]}),(null===C||void 0===C||null===(u=C.submissions)||void 0===u||null===(j=u.submissionsBySurvey)||void 0===j?void 0:j.length)>0?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(K,{onChange:P}),Object(E.jsx)("div",{className:"table-responsive-md",children:Object(E.jsxs)("table",{className:"table align-middle table-success table-striped",children:[Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{scope:"col",children:"#"}),Object(E.jsx)("th",{scope:"col",children:"Name"}),Object(E.jsx)("th",{scope:"col",children:"Phone Number"}),Object(E.jsx)("th",{scope:"col",children:"Email"})]})}),Object(E.jsxs)("tbody",{children:[(null===C||void 0===C||null===(v=C.submissions)||void 0===v?void 0:v.filteredSubmissions.length)>0&&(null===C||void 0===C||null===(h=C.submissions)||void 0===h||null===(x=h.filteredSubmissions)||void 0===x?void 0:x.map((function(e,t){var n,s,i,c,a,r;return Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{scope:"row",children:t+1}),Object(E.jsx)("td",{children:Object(E.jsxs)(F.b,{to:"/submission/".concat(null===e||void 0===e||null===(s=e.submission)||void 0===s?void 0:s._id),children:[null===e||void 0===e||null===(i=e.submission)||void 0===i?void 0:i.firstname," ",null===e||void 0===e||null===(c=e.submission)||void 0===c?void 0:c.lastname]})}),Object(E.jsx)("td",{children:null===e||void 0===e||null===(a=e.submission)||void 0===a?void 0:a.phone}),Object(E.jsx)("td",{children:null===e||void 0===e||null===(r=e.submission)||void 0===r?void 0:r.email})]},null===e||void 0===e||null===(n=e.submission)||void 0===n?void 0:n._id)}))),(null===C||void 0===C||null===(O=C.submissions)||void 0===O?void 0:O.filteredSubmissions.length)<=0&&(null===C||void 0===C||null===(p=C.submissions)||void 0===p||null===(f=p.submissionsBySurvey)||void 0===f?void 0:f.map((function(e,t){var n,s,i,c,a,r;return Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{scope:"row",children:t+1}),Object(E.jsx)("td",{children:Object(E.jsxs)(F.b,{to:"/submission/".concat(null===e||void 0===e||null===(s=e.submission)||void 0===s?void 0:s._id),children:[null===e||void 0===e||null===(i=e.submission)||void 0===i?void 0:i.firstname," ",null===e||void 0===e||null===(c=e.submission)||void 0===c?void 0:c.lastname]})}),Object(E.jsx)("td",{children:null===e||void 0===e||null===(a=e.submission)||void 0===a?void 0:a.phone}),Object(E.jsx)("td",{children:null===e||void 0===e||null===(r=e.submission)||void 0===r?void 0:r.email})]},null===e||void 0===e||null===(n=e.submission)||void 0===n?void 0:n._id)})))]})]})})]}):Object(E.jsx)("p",{children:"Nothing here yet :("})]})}):Object(E.jsx)("p",{children:"Click any survey on the left to load a single survey :)"})})})}),Object(E.jsx)("main",{className:"row mb-3",children:Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(V,{title:"Questions",children:(null===C||void 0===C||null===(N=C.surveys)||void 0===N||null===(y=N.survey)||void 0===y||null===(w=y.survey)||void 0===w?void 0:w.title)?Object(E.jsxs)("div",{className:"col-auto",children:[Object(E.jsxs)("h6",{children:[Object(E.jsx)("span",{className:"badge rounded-pill bg-success fs-6",children:null===C||void 0===C||null===(S=C.surveys)||void 0===S||null===(q=S.survey)||void 0===q||null===(k=q.questions)||void 0===k?void 0:k.length})," Questions"]}),null===C||void 0===C||null===(B=C.surveys)||void 0===B||null===(A=B.survey)||void 0===A||null===(T=A.questions)||void 0===T?void 0:T.map((function(e,t){var n;return Object(E.jsxs)("details",{children:[Object(E.jsxs)("summary",{children:[t+1,". ",null===e||void 0===e?void 0:e.passage]}),null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.map((function(e){return Object(E.jsxs)("p",{className:"mb-0",children:["Option ",null===e||void 0===e?void 0:e.choice," : ",null===e||void 0===e?void 0:e.value]},e._id)}))]},null===e||void 0===e?void 0:e._id)}))]}):Object(E.jsx)("p",{children:"Click any survey on the left to load questions :)"})})})})]})]})]})})})},Z=function(e){var t=e.handleSubmit,n=W.b().shape({title:W.c().min(8,"Too Short").required("Your survey needs a title"),questions:W.a().of(W.b().shape({question:W.c().required("A question is required"),optionA:W.c().required("option A is required"),optionB:W.c().required("option B is required")})).required("Your survey needs some questions")}),s=function(e){t(e)};return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(M.e,{initialValues:{title:"",questions:[{question:"",optionA:"",optionB:""},{question:"",optionA:"",optionB:""},{question:"",optionA:"",optionB:""},{question:"",optionA:"",optionB:""},{question:"",optionA:"",optionB:""}]},validationSchema:n,onSubmit:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,500)}));case 2:s(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.values;return Object(E.jsxs)(M.d,{children:[Object(E.jsx)("h5",{className:"mb-4",children:"Fill in the form below with the questions and options you prefer :)"}),Object(E.jsxs)("div",{className:"row g-3 align-items-center mb-5",children:[Object(E.jsx)("div",{className:"col-2",children:Object(E.jsx)("label",{htmlFor:"title",className:"form-label",children:" Survey Title"})}),Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(M.b,{name:"title",placeholder:"Effectiveness Of SAT",type:"text",className:"form-control",required:!0})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(M.a,{name:"title",component:"span",className:"text-danger mt-2"})})})]}),Object(E.jsx)(M.c,{name:"questions",children:function(e){var n=e.remove,s=e.push;return Object(E.jsxs)("div",{children:[t.questions.length>0&&t.questions.map((function(e,t){return Object(E.jsxs)("div",{className:"mb-5",children:[Object(E.jsxs)("div",{className:"row g-3 align-items-center mb-2",children:[Object(E.jsx)("div",{className:"col-2",children:Object(E.jsxs)("label",{htmlFor:"questions.".concat(t,".question"),className:"form-label",children:["Question ",t+1]})}),Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(M.b,{name:"questions.".concat(t,".question"),placeholder:"All that to consider one a success?",type:"text",className:"form-control",required:!0})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(M.a,{name:"questions.".concat(t,".question"),component:"span",className:"text-danger"})})})]}),Object(E.jsxs)("div",{className:"row g-3 align-items-center mb-2",children:[Object(E.jsx)("div",{className:"col-2",children:Object(E.jsx)("label",{htmlFor:"questions.".concat(t,".optionA"),className:"form-label",children:"Option A"})}),Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(M.b,{name:"questions.".concat(t,".optionA"),placeholder:"Gaddamit! the system is rigged",type:"text",className:"form-control",required:!0})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsx)(M.a,{name:"questions.".concat(t,".optionA"),component:"span",className:"text-danger"})})]}),Object(E.jsxs)("div",{className:"row g-3 align-items-center mb-0",children:[Object(E.jsx)("div",{className:"col-2",children:Object(E.jsx)("label",{htmlFor:"questions.".concat(t,".optionB"),className:"form-label",children:"Option B"})}),Object(E.jsx)("div",{className:"col",children:Object(E.jsx)(M.b,{name:"questions.".concat(t,".optionB"),placeholder:"Well, they might have a point.",type:"text",className:"form-control",required:!0})}),Object(E.jsx)("div",{className:"row",children:Object(E.jsx)(M.a,{name:"questions.".concat(t,".optionB"),component:"span",className:"text-danger"})})]}),t+1>5&&Object(E.jsx)(P,{label:"Discard",className:"btn btn-danger mb-3",onClick:function(){return n(t)}})]},t)})),Object(E.jsx)(P,{label:"Add another question",className:"btn btn-outline-success mb-3",onClick:function(){return s({question:"",optionA:"",optionB:""})}})]})}}),Object(E.jsx)(P,{type:"submit",label:"Submit",className:"btn btn-dark w-100"})]})}})})},$=function(){var e=Object(a.b)();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(R,{children:Object(E.jsx)("div",{className:"container-fluid px-5",children:Object(E.jsx)("div",{className:"row",children:Object(E.jsx)("div",{className:"col d-flex px-sm-4 px-0 flex-column h-sm-100",children:Object(E.jsx)("main",{className:"row mb-3",children:Object(E.jsx)("div",{className:"col",children:Object(E.jsxs)("div",{style:{maxWidth:"900px",margin:"0 auto"},children:[Object(E.jsx)("h2",{className:"py-4 text-center",children:"Add Survey"}),Object(E.jsx)(V,{title:"Add Survey Form",children:Object(E.jsx)(Z,{handleSubmit:function(t){var n,s=t.questions.map((function(e){return{passage:e.question,options:[{choice:"A",value:e.optionA},{choice:"B",value:e.optionB}]}})),i=window.localStorage.getItem("user"),c={admin:JSON.parse(i).id,title:t.title,questions:s};try{e((n=c,function(){var e=Object(m.a)(b.a.mark((function e(t){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.create(n);case 2:s=e.sent,t({type:"NEW_SURVEY",data:s});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a={hasError:!1,title:"Add Survey Success!",message:"Survey added successfuly"};e(d(a)),setTimeout((function(){e(d(Object(v.a)(Object(v.a)({},a),{},{title:"",message:""})))}),2e3),setTimeout((function(){window.location.href="".concat(window.location.protocol,"//").concat(window.location.host)}),1e3)}catch(u){var r,l,o={hasError:!0,title:"Add Survey Failed!",message:"Adding survey failed! ".concat(null===u||void 0===u||null===(r=u.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)};e(d(o)),setTimeout((function(){e(d(Object(v.a)(Object(v.a)({},o),{},{title:"",message:""})))}),2e3)}}})})]})})})})})})})})},ee=function(e){e?x.a.defaults.headers.common.Authorization="bearer ".concat(e):delete x.a.defaults.headers.common.Authorization},te=function(){var e=Object(s.useState)(!1),t=Object(_.a)(e,2),n=t[0],i=t[1],c=Object(a.b)();return Object(s.useEffect)((function(){var e=window.localStorage.getItem("user");if(e){var t=JSON.parse(e);ee(t.token),i(!0),c(function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.getAll();case 2:n=e.sent,t({type:"INIT_SURVEYS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c(function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getAll();case 2:n=e.sent,t({type:"INIT_SUBMISSIONS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[]),Object(E.jsxs)(F.a,{children:[Object(E.jsx)(C,{}),Object(E.jsxs)(T.d,{children:[Object(E.jsx)(T.b,{path:"/submission/:id",children:n?Object(E.jsx)(J,{}):Object(E.jsx)(T.a,{to:"/"})}),Object(E.jsx)(T.b,{path:"/auth/login",children:n?Object(E.jsx)(T.a,{to:"/"}):Object(E.jsx)(G,{})}),Object(E.jsx)(T.b,{path:"/survey/add",children:n?Object(E.jsx)($,{}):Object(E.jsx)(T.a,{to:"/"})}),Object(E.jsx)(T.b,{path:"/",children:n?Object(E.jsx)(X,{}):Object(E.jsx)(T.a,{to:"/auth/login"})})]})]})};c.a.render(Object(E.jsx)(a.a,{store:A,children:Object(E.jsx)(F.a,{children:Object(E.jsx)(te,{})})}),document.getElementById("root"))}},[[256,1,2]]]);
//# sourceMappingURL=main.af8df6ae.chunk.js.map